<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FAQ Support ‚Äî Avis-Locataire</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --primary: #1B2A4A;
    --primary-light: #2C3E6B;
    --accent: #3B82F6;
    --accent-light: #DBEAFE;
    --bg: #F1F5F9;
    --card: #FFFFFF;
    --text: #1E293B;
    --text-light: #64748B;
    --border: #E2E8F0;
    --success: #10B981;
    --highlight: #FEF3C7;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
  }

  /* Header */
  .header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
    color: white;
    padding: 2rem 1.5rem 3.5rem;
    text-align: center;
    position: relative;
  }
  .header h1 {
    font-size: 1.75rem;
    font-weight: 700;
    margin-bottom: 0.25rem;
  }
  .header p {
    font-size: 0.9rem;
    opacity: 0.8;
  }

  /* Search */
  .search-container {
    max-width: 640px;
    margin: -1.75rem auto 0;
    padding: 0 1.5rem;
    position: relative;
    z-index: 10;
  }
  .search-box {
    display: flex;
    align-items: center;
    background: var(--card);
    border-radius: 12px;
    box-shadow: 0 4px 24px rgba(0,0,0,0.1);
    padding: 0.25rem 1rem;
    border: 2px solid transparent;
    transition: border-color 0.2s;
  }
  .search-box:focus-within {
    border-color: var(--accent);
  }
  .search-icon {
    color: var(--text-light);
    flex-shrink: 0;
  }
  .search-box input {
    flex: 1;
    border: none;
    outline: none;
    padding: 0.85rem 0.75rem;
    font-size: 1rem;
    font-family: inherit;
    background: transparent;
    color: var(--text);
  }
  .search-box input::placeholder {
    color: var(--text-light);
  }
  .clear-btn {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text-light);
    padding: 4px;
    border-radius: 50%;
    display: none;
    transition: color 0.2s;
  }
  .clear-btn:hover { color: var(--text); }
  .clear-btn.visible { display: block; }

  .search-stats {
    text-align: center;
    margin-top: 0.75rem;
    font-size: 0.85rem;
    color: var(--text-light);
    min-height: 1.25rem;
  }

  /* Categories nav */
  .categories-nav {
    max-width: 900px;
    margin: 1.5rem auto 0;
    padding: 0 1.5rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    justify-content: center;
  }
  .cat-pill {
    padding: 0.35rem 0.85rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
    cursor: pointer;
    border: 1.5px solid var(--border);
    background: var(--card);
    color: var(--text-light);
    transition: all 0.2s;
    white-space: nowrap;
  }
  .cat-pill:hover {
    border-color: var(--accent);
    color: var(--accent);
  }
  .cat-pill.active {
    background: var(--accent);
    color: white;
    border-color: var(--accent);
  }
  .cat-pill .count {
    display: inline-block;
    background: rgba(0,0,0,0.08);
    border-radius: 10px;
    padding: 0 6px;
    font-size: 0.7rem;
    margin-left: 4px;
  }
  .cat-pill.active .count {
    background: rgba(255,255,255,0.25);
  }

  /* Content */
  .content {
    max-width: 800px;
    margin: 1.5rem auto 3rem;
    padding: 0 1.5rem;
  }

  /* Section */
  .section {
    margin-bottom: 1.5rem;
  }
  .section-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 0;
    cursor: pointer;
    user-select: none;
  }
  .section-icon {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    flex-shrink: 0;
  }
  .section-title {
    font-size: 1.05rem;
    font-weight: 600;
    flex: 1;
  }
  .section-count {
    font-size: 0.75rem;
    color: var(--text-light);
    background: var(--bg);
    padding: 2px 8px;
    border-radius: 10px;
  }

  /* FAQ item */
  .faq-item {
    background: var(--card);
    border-radius: 10px;
    margin-bottom: 0.5rem;
    border: 1px solid var(--border);
    overflow: hidden;
    transition: box-shadow 0.2s;
  }
  .faq-item:hover {
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }
  .faq-item.highlight {
    border-color: var(--accent);
    box-shadow: 0 0 0 1px var(--accent);
  }
  .faq-question {
    display: flex;
    align-items: center;
    padding: 0.85rem 1rem;
    cursor: pointer;
    user-select: none;
    gap: 0.75rem;
  }
  .faq-question .q-icon {
    color: var(--accent);
    font-weight: 700;
    font-size: 0.85rem;
    flex-shrink: 0;
  }
  .faq-question .q-text {
    flex: 1;
    font-weight: 500;
    font-size: 0.92rem;
  }
  .faq-question .chevron {
    color: var(--text-light);
    transition: transform 0.25s;
    flex-shrink: 0;
  }
  .faq-item.open .faq-question .chevron {
    transform: rotate(180deg);
  }
  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }
  .faq-item.open .faq-answer {
    max-height: 500px;
  }
  .faq-answer-inner {
    padding: 0 1rem 1rem 2.75rem;
    font-size: 0.88rem;
    color: var(--text-light);
    line-height: 1.7;
  }

  mark {
    background: var(--highlight);
    color: inherit;
    padding: 1px 2px;
    border-radius: 2px;
  }

  .no-results {
    text-align: center;
    padding: 3rem 1rem;
    color: var(--text-light);
  }
  .no-results .emoji {
    font-size: 2.5rem;
    margin-bottom: 0.75rem;
  }
  .no-results p {
    font-size: 0.95rem;
  }

  .footer {
    text-align: center;
    padding: 1.5rem;
    font-size: 0.8rem;
    color: var(--text-light);
  }

  @media (max-width: 600px) {
    .header h1 { font-size: 1.35rem; }
    .categories-nav { gap: 0.35rem; }
    .cat-pill { font-size: 0.72rem; padding: 0.3rem 0.65rem; }
  }
</style>
</head>
<body>

<div class="header">
  <h1>FAQ Support ‚Äî Avis-Locataire</h1>
  <p>920 tickets analys√©s ‚Ä¢ 13 cat√©gories ‚Ä¢ 40 questions</p>
</div>

<div class="search-container">
  <div class="search-box">
    <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
    <input type="text" id="searchInput" placeholder="Rechercher dans la FAQ‚Ä¶" autocomplete="off">
    <button class="clear-btn" id="clearBtn" aria-label="Effacer">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
    </button>
  </div>
  <div class="search-stats" id="searchStats"></div>
</div>

<div class="categories-nav" id="categoriesNav"></div>

<div class="content" id="faqContent"></div>

<div class="footer">FAQ g√©n√©r√©e le 26/02/2026 ‚Äî Analyse de 920 tickets HubSpot</div>

<script>
const faqData = [
  {
    id: 1, title: "Enqu√™tes de satisfaction", icon: "üìä",
    color: "#EFF6FF", iconBg: "#DBEAFE",
    items: [
      { q: "Comment cr√©er une nouvelle enqu√™te ?", a: "Contactez l'√©quipe support en pr√©cisant : le type d'enqu√™te (entrants, DIT, satisfaction globale, propret√©, post-sinistre‚Ä¶), le texte du questionnaire, le mode d'envoi souhait√© (SMS ou email), les dates de lancement et de relance, et le fichier des destinataires au format Excel." },
      { q: "Comment modifier une enqu√™te existante ?", a: "Les modifications de libell√©s, de questions ou de filtres n√©cessitent une intervention de l'√©quipe Avis-Locataire. Envoyez un mail au support avec les modifications souhait√©es. Vous ne pouvez pas modifier vous-m√™me les enqu√™tes d√©j√† envoy√©es." },
      { q: "Comment envoyer le fichier de destinataires pour une enqu√™te ?", a: "D√©posez votre fichier Excel (XLS/XLSX) sur le serveur FTP via FileZilla ou envoyez-le directement par mail au support. Pr√©cisez le mode d'envoi souhait√© (SMS ou email) pour chaque fichier." },
      { q: "Mon enqu√™te affiche un √©cart entre le nombre de destinataires envoy√©s et contact√©s ‚Äî pourquoi ?", a: "Cela peut provenir de num√©ros de t√©l√©phone ou adresses email invalides, de doublons dans le fichier, ou de locataires pr√©sents dans la liste des d√©sinscrits. V√©rifiez votre fichier source et contactez le support pour identifier les exclusions." },
      { q: "Comment relancer une enqu√™te qui a eu peu de r√©ponses ?", a: "Contactez le support en indiquant le nom de l'enqu√™te concern√©e. Une relance par SMS ou email peut √™tre programm√©e sur les destinataires n'ayant pas encore r√©pondu." },
      { q: "Les filtres de mon enqu√™te ne donnent pas des r√©sultats coh√©rents ‚Äî que faire ?", a: "Signalez le probl√®me au support avec des captures d'√©cran montrant l'incoh√©rence (ex : total des filtres ‚â† total g√©n√©ral). L'√©quipe technique v√©rifiera le param√©trage." },
      { q: "Peut-on limiter le d√©lai de r√©ponse d'une enqu√™te ?", a: "Oui, il est possible de configurer une date de cl√¥ture ou une dur√©e maximale de r√©ponse. Pr√©cisez votre souhait au support." },
      { q: "Peut-on cr√©er une enqu√™te accessible par QR Code ?", a: "Oui, des enqu√™tes en libre acc√®s via QR Code peuvent √™tre mises en place (par exemple pour les halls d'immeubles). Contactez le support pour la configuration." },
      { q: "Comment suspendre temporairement les envois d'enqu√™tes ?", a: "Envoyez une demande au support en pr√©cisant la date de suspension et la date de reprise souhait√©e." }
    ]
  },
  {
    id: 2, title: "Application Collecte", icon: "üì±",
    color: "#F0FDF4", iconBg: "#DCFCE7",
    items: [
      { q: "L'application ne synchronise plus ‚Äî que faire ?", a: "V√©rifiez d'abord votre connexion internet. Essayez de fermer et rouvrir l'application. Si le probl√®me persiste, indiquez au support : votre email de connexion, la version de l'application, le mod√®le de votre appareil (Android/iOS) et une capture d'√©cran de l'erreur." },
      { q: "Les photos ne s'enregistrent pas apr√®s la prise de vue", a: "C'est un bug connu sur certaines versions Android. Mettez √† jour l'application sur le Play Store. Si le probl√®me persiste, vous pouvez contourner en prenant la photo depuis la galerie du t√©l√©phone puis en l'important dans l'application." },
      { q: "Les photos 360¬∞ ne se chargent pas correctement", a: "V√©rifiez que vous utilisez la derni√®re version de l'application. Ce bug a √©t√© identifi√© et corrig√© dans les versions r√©centes. Si le probl√®me persiste, contactez le support avec la version exacte de l'application." },
      { q: "J'ai une erreur 500 sur Collecte", a: "Une erreur 500 est un probl√®me serveur. Contactez le support imm√©diatement en indiquant l'heure de l'erreur et une capture d'√©cran. L'√©quipe technique intervient g√©n√©ralement rapidement." },
      { q: "Comment cr√©er un nouveau profil sur Collecte ?", a: "Envoyez au support : le nom et pr√©nom de l'utilisateur, son adresse email, son r√¥le (op√©rateur, gestionnaire, lecteur) et les collectes/patrimoines √† rattacher." },
      { q: "Le message ¬´ adresse email non disponible ¬ª appara√Æt lors de la cr√©ation d'un compte", a: "Cela signifie que l'email est d√©j√† utilis√© par un autre compte (√©ventuellement supprim√©). Contactez le support pour d√©bloquer l'adresse ou la r√©attribuer." },
      { q: "Comment changer le r√¥le d'un utilisateur ?", a: "Envoyez la demande au support en pr√©cisant le nom de l'utilisateur, son email et le nouveau r√¥le souhait√© (op√©rateur, gestionnaire ou lecteur)." },
      { q: "Comment mettre √† jour la base patrimoine dans Collecte ?", a: "D√©posez le fichier mis √† jour sur le serveur FTP et pr√©venez le support pour qu'il proc√®de √† l'int√©gration." },
      { q: "La synchronisation est tr√®s lente au d√©marrage", a: "Ce probl√®me peut survenir si la base de donn√©es est volumineuse. Contactez le support pour optimiser votre configuration." }
    ]
  },
  {
    id: 3, title: "Comptes et acc√®s", icon: "üîë",
    color: "#FEF3C7", iconBg: "#FDE68A",
    items: [
      { q: "Comment cr√©er un compte sur la plateforme Avis-Locataire ?", a: "Envoyez au support : le nom, pr√©nom, email, fonction et r√¥le souhait√© (contributeur, lecteur, administrateur) ainsi que les organisations/entit√©s √† rattacher." },
      { q: "J'ai perdu mon mot de passe", a: "Utilisez la fonctionnalit√© ¬´ Mot de passe oubli√© ¬ª sur la page de connexion. Si le probl√®me persiste, contactez le support." },
      { q: "Comment ajouter ou supprimer un destinataire des rapports / alertes ?", a: "Envoyez au support le nom, l'email de la personne et les types de mails concern√©s (alertes, rapports hebdomadaires, r√©sultats d'enqu√™tes‚Ä¶)." },
      { q: "Je suis dans la liste des d√©sinscrits alors que je n'ai rien demand√©", a: "Cela peut arriver si un clic accidentel sur le lien de d√©sinscription a √©t√© effectu√©. Contactez le support pour √™tre r√©inscrit." },
      { q: "Comment donner acc√®s √† FileZilla / FTP ?", a: "Contactez le support pour obtenir les identifiants de connexion au serveur FTP permettant le d√©p√¥t des fichiers d'enqu√™tes." },
      { q: "Comment mettre en place le SSO (Single Sign-On) ?", a: "La mise en place du SSO n√©cessite une coordination technique entre votre service informatique et Avis-Locataire. Contactez le support pour lancer le processus." }
    ]
  },
  {
    id: 4, title: "SMS et Communications", icon: "üí¨",
    color: "#EDE9FE", iconBg: "#DDD6FE",
    items: [
      { q: "Mon stock de SMS est √©puis√© ‚Äî comment le recharger ?", a: "Contactez le support en demandant une incr√©mentation de votre solde SMS. Pr√©cisez le nombre de SMS souhait√© (ex : 5 000, 10 000‚Ä¶)." },
      { q: "Comment conna√Ætre ma consommation de SMS ?", a: "Vous pouvez consulter votre solde sur la plateforme. Pour un historique d√©taill√©, demandez un export au support." },
      { q: "Comment annuler un envoi de communication programm√© ?", a: "Contactez le support en urgence avec le nom de la communication √† annuler. Si l'envoi n'a pas encore √©t√© d√©clench√©, il peut √™tre stopp√©." },
      { q: "Comment envoyer une communication ponctuelle (SMS ou email) ?", a: "Pr√©parez votre fichier de destinataires et le texte du message, puis envoyez-les au support avec la date et l'heure d'envoi souhait√©es." },
      { q: "Peut-on obtenir un export de tous les SMS envoy√©s ?", a: "Oui, le support peut g√©n√©rer un fichier Excel avec l'historique de tous les SMS envoy√©s sur une p√©riode donn√©e." },
      { q: "Un SMS a √©t√© envoy√© par erreur au format PDF ‚Äî que s'est-il pass√© ?", a: "Si vous avez s√©lectionn√© le mauvais mode d'envoi lors du param√©trage, un SMS peut √™tre envoy√© au lieu d'une impression PDF. Contactez le support pour corriger." }
    ]
  },
  {
    id: 5, title: "Extractions et exports", icon: "üì§",
    color: "#FFF7ED", iconBg: "#FED7AA",
    items: [
      { q: "Comment obtenir une extraction de donn√©es ?", a: "Envoyez votre demande au support en pr√©cisant : l'enqu√™te ou le module concern√©, la p√©riode souhait√©e et le format attendu (CSV, Excel‚Ä¶)." },
      { q: "Les donn√©es de mon extraction semblent incompl√®tes", a: "V√©rifiez la p√©riode s√©lectionn√©e et les filtres appliqu√©s. Si le probl√®me persiste, contactez le support avec une capture d'√©cran." },
      { q: "Comment automatiser l'envoi de fichiers d'extraction ?", a: "Des flux automatiques (via FTP ou email) peuvent √™tre mis en place. Contactez le support pour configurer un envoi r√©gulier (hebdomadaire, mensuel‚Ä¶)." }
    ]
  },
  {
    id: 6, title: "Module Rendez-vous", icon: "üìÖ",
    color: "#FDF2F8", iconBg: "#FBCFE8",
    items: [
      { q: "Je ne peux pas s√©lectionner de service ou de destinataire lors de la cr√©ation d'un RDV", a: "C'est un bug identifi√©. Contactez le support avec une capture d'√©cran. En attendant la correction, essayez de saisir le nom du service au clavier plut√¥t que de le s√©lectionner dans la liste." },
      { q: "Comment cr√©er des cr√©neaux de rendez-vous pour les locataires ?", a: "Envoyez au support : le site/chantier concern√©, les dates et horaires des cr√©neaux, la dur√©e de chaque cr√©neau (ex : 15 min) et le nombre maximum de RDV par cr√©neau." }
    ]
  },
  {
    id: 7, title: "Alertes", icon: "üîî",
    color: "#FEF2F2", iconBg: "#FECACA",
    items: [
      { q: "Je ne re√ßois pas les fiches alertes par mail", a: "V√©rifiez que votre adresse email est bien configur√©e comme destinataire des alertes. Si oui, v√©rifiez vos spams. Sinon, contactez le support pour vous ajouter." },
      { q: "Comment modifier le contenu d'un mail d'alerte ?", a: "Le contenu des mails d'alerte peut √™tre personnalis√©. Envoyez au support le texte souhait√© et les conditions de d√©clenchement." },
      { q: "Comment ajouter un destinataire aux alertes ?", a: "Envoyez au support le nom, l'email du nouveau destinataire et le type d'alertes concern√©es." },
      { q: "Comment modifier la note seuil qui d√©clenche une alerte ?", a: "Contactez le support en pr√©cisant l'enqu√™te concern√©e et la nouvelle note seuil souhait√©e." }
    ]
  },
  {
    id: 8, title: "Chantiers IRIS / L√©on Grosse", icon: "üèóÔ∏è",
    color: "#F0F9FF", iconBg: "#BAE6FD",
    items: [
      { q: "Comment demander la cr√©ation d'un chantier dans Collecte ?", a: "Remplissez le formulaire de demande IRIS avec : le nom du demandeur, l'entit√©, les coordonn√©es, l'affaire concern√©e et les informations du chantier. Le support proc√®de √† la cr√©ation." },
      { q: "Comment int√©grer un quittus dans un chantier ?", a: "Envoyez le fichier quittus au support en pr√©cisant le chantier et les op√©rateurs √† qui l'assigner." },
      { q: "La synchronisation d'un chantier a √©chou√© ‚Äî les donn√©es sont perdues ?", a: "Contactez le support imm√©diatement avec les captures d'√©cran des logements concern√©s. Dans la plupart des cas, les donn√©es peuvent √™tre r√©cup√©r√©es c√¥t√© serveur." }
    ]
  },
  {
    id: 9, title: "Module R√©clamations", icon: "üìù",
    color: "#ECFDF5", iconBg: "#A7F3D0",
    items: [
      { q: "Peut-on envoyer un SMS au locataire lors du changement de statut d'une r√©clamation ?", a: "Le param√©trage des notifications SMS lors des changements de statut (non r√©solu ‚Üí en cours, en cours ‚Üí r√©solu) est configurable. Contactez le support pour l'activer." }
    ]
  },
  {
    id: 10, title: "Reporting et statistiques", icon: "üìà",
    color: "#F5F3FF", iconBg: "#C4B5FD",
    items: [
      { q: "L'onglet Suivi affiche des r√©sultats incoh√©rents entre les vues", a: "Des √©carts entre les vues ¬´ Mensuel ¬ª et ¬´ Par envoi ¬ª peuvent survenir en raison du mode de calcul. Signalez l'incoh√©rence au support avec des captures d'√©cran." },
      { q: "Comment obtenir un mod√®le de questionnaire existant ?", a: "Contactez le support en pr√©cisant le type d'enqu√™te souhait√©. Des mod√®les types sont disponibles (satisfaction globale, entrants, propret√©, DIT, post-sinistre‚Ä¶)." },
      { q: "Peut-on automatiser la transmission des r√©sultats aux prestataires ?", a: "Oui, des envois automatiques de r√©sultats d'enqu√™tes aux prestataires peuvent √™tre configur√©s. Contactez le support pour la mise en place." }
    ]
  },
  {
    id: 11, title: "Base locataires et patrimoine", icon: "üè†",
    color: "#FFF7ED", iconBg: "#FDBA74",
    items: [
      { q: "Comment mettre √† jour la base locataires ?", a: "D√©posez le fichier mis √† jour sur le serveur FTP ou envoyez-le par mail au support. Pr√©cisez s'il s'agit d'un remplacement complet ou d'un ajout." },
      { q: "Un patrimoine/logement n'appara√Æt pas sur la plateforme", a: "V√©rifiez qu'il est bien pr√©sent dans le fichier de synchronisation. Si oui, contactez le support pour forcer l'int√©gration." },
      { q: "La g√©olocalisation d'un patrimoine est erron√©e", a: "Signalez l'adresse incorrecte au support avec l'adresse exacte. La correction sera effectu√©e manuellement." }
    ]
  },
  {
    id: 12, title: "Facturation et contrat", icon: "üí∞",
    color: "#ECFDF5", iconBg: "#6EE7B7",
    items: [
      { q: "Comment obtenir ma facture ?", a: "Les factures sont envoy√©es selon les termes de votre contrat. Contactez le support ou votre interlocuteur commercial pour toute question." },
      { q: "Comment demander un devis pour un nouveau service ?", a: "Envoyez votre demande au support ou √† votre contact commercial en d√©crivant le besoin." }
    ]
  },
  {
    id: 13, title: "Formation et prise en main", icon: "üéì",
    color: "#EFF6FF", iconBg: "#93C5FD",
    items: [
      { q: "Comment organiser une formation ou une d√©monstration de l'outil ?", a: "Contactez le support pour planifier une visio de pr√©sentation. Des sessions de formation peuvent √™tre organis√©es pour Collecte, la plateforme enqu√™tes ou les modules Communication/RDV." },
      { q: "Existe-t-il une documentation d'aide ?", a: "Contactez le support qui pourra vous transmettre les guides d'utilisation adapt√©s √† votre configuration." }
    ]
  }
];

let activeCategory = null;
let searchQuery = '';

function normalize(str) {
  return str.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase();
}

function highlightText(text, query) {
  if (!query) return text;
  const norm = normalize(text);
  const normQ = normalize(query);
  const idx = norm.indexOf(normQ);
  if (idx === -1) return text;
  return text.slice(0, idx) + '<mark>' + text.slice(idx, idx + query.length) + '</mark>' + text.slice(idx + query.length);
}

function renderCategories() {
  const nav = document.getElementById('categoriesNav');
  let html = '<div class="cat-pill' + (activeCategory === null ? ' active' : '') + '" data-cat="all">Tout <span class="count">' + faqData.reduce((s, c) => s + c.items.length, 0) + '</span></div>';
  faqData.forEach(cat => {
    html += '<div class="cat-pill' + (activeCategory === cat.id ? ' active' : '') + '" data-cat="' + cat.id + '">' + cat.icon + ' ' + cat.title + ' <span class="count">' + cat.items.length + '</span></div>';
  });
  nav.innerHTML = html;
  nav.querySelectorAll('.cat-pill').forEach(pill => {
    pill.addEventListener('click', () => {
      const catId = pill.dataset.cat;
      activeCategory = catId === 'all' ? null : parseInt(catId);
      render();
    });
  });
}

function render() {
  const query = searchQuery;
  const normQ = normalize(query);
  const container = document.getElementById('faqContent');
  let totalMatches = 0;
  let html = '';

  faqData.forEach(cat => {
    if (activeCategory !== null && cat.id !== activeCategory) return;

    const matchingItems = cat.items.filter(item => {
      if (!normQ) return true;
      return normalize(item.q).includes(normQ) || normalize(item.a).includes(normQ);
    });

    if (matchingItems.length === 0) return;
    totalMatches += matchingItems.length;

    html += '<div class="section" data-section="' + cat.id + '">';
    html += '<div class="section-header">';
    html += '<div class="section-icon" style="background:' + cat.iconBg + '">' + cat.icon + '</div>';
    html += '<div class="section-title">' + cat.title + '</div>';
    html += '<div class="section-count">' + matchingItems.length + ' question' + (matchingItems.length > 1 ? 's' : '') + '</div>';
    html += '</div>';

    matchingItems.forEach((item, i) => {
      const isMatch = normQ && (normalize(item.q).includes(normQ) || normalize(item.a).includes(normQ));
      const openClass = normQ ? ' open' : '';
      const hlClass = isMatch ? ' highlight' : '';
      html += '<div class="faq-item' + openClass + hlClass + '" data-idx="' + cat.id + '-' + i + '">';
      html += '<div class="faq-question">';
      html += '<span class="q-icon">Q</span>';
      html += '<span class="q-text">' + (normQ ? highlightText(item.q, query) : item.q) + '</span>';
      html += '<svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>';
      html += '</div>';
      html += '<div class="faq-answer"><div class="faq-answer-inner">' + (normQ ? highlightText(item.a, query) : item.a) + '</div></div>';
      html += '</div>';
    });

    html += '</div>';
  });

  if (totalMatches === 0 && normQ) {
    html = '<div class="no-results"><div class="emoji">üîç</div><p>Aucun r√©sultat pour ¬´ ' + query + ' ¬ª</p><p style="margin-top:0.5rem;font-size:0.85rem">Essayez avec d\'autres mots-cl√©s</p></div>';
  }

  container.innerHTML = html;

  // Stats
  const stats = document.getElementById('searchStats');
  if (normQ) {
    stats.textContent = totalMatches + ' r√©sultat' + (totalMatches > 1 ? 's' : '') + ' trouv√©' + (totalMatches > 1 ? 's' : '');
  } else {
    stats.textContent = '';
  }

  // Toggle
  container.querySelectorAll('.faq-question').forEach(q => {
    q.addEventListener('click', () => {
      q.parentElement.classList.toggle('open');
    });
  });

  renderCategories();
}

// Search
const searchInput = document.getElementById('searchInput');
const clearBtn = document.getElementById('clearBtn');
let debounceTimer;

searchInput.addEventListener('input', () => {
  clearBtn.classList.toggle('visible', searchInput.value.length > 0);
  clearTimeout(debounceTimer);
  debounceTimer = setTimeout(() => {
    searchQuery = searchInput.value.trim();
    render();
  }, 200);
});

clearBtn.addEventListener('click', () => {
  searchInput.value = '';
  searchQuery = '';
  clearBtn.classList.remove('visible');
  render();
  searchInput.focus();
});

// Init
render();
</script>
</body>
</html>
